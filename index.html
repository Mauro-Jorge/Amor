<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Lays ‚ù§Ô∏è Mauro - Nosso Amor Infinito</title>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <style>
    body {
      font-family: 'Segoe UI', sans-serif;
      background: linear-gradient(to right, #ffe6eb, #fcddec);
      color: #e6005c;
      text-align: center;
      margin: 0;
      padding: 2rem;
      overflow-x: hidden;
    }
    h1 {
      font-size: 2.5rem;
      color: #d63384;
      margin-bottom: 1.5rem;
    }
    .pulsing-heart {
      animation: pulse 1.5s ease-in-out infinite;
      display: inline-block;
    }
    @keyframes pulse {
      0% { transform: scale(1); }
      50% { transform: scale(1.25); }
      100% { transform: scale(1); }
    }
    h2, h3 {
      font-size: 2rem;
      color: #d63384;
      margin-top: 2.5rem;
      margin-bottom: 1rem;
    }
    canvas {
      max-width: 700px;
      margin: 2rem auto;
      background: white;
      border-radius: 20px;
      box-shadow: 0 10px 20px rgba(0,0,0,0.1);
    }
    #rouletteCanvas {
        border-radius: 50%;
        box-shadow: 0 0 15px rgba(0,0,0,0.2);
    }
    .music-player-container {
      margin-top: 2rem;
      margin-bottom: 2rem;
      padding: 10px;
      border-radius: 10px;
      display: inline-block;
      background-color: rgba(255, 255, 255, 0.7);
      box-shadow: 0 6px 12px rgba(0,0,0,0.1);
    }
    .music-player-container audio {
      width: 300px;
    }
    .interactive-section, .countdown-container, .daily-phrase-container, .quadrinho-amor-container, .game-container {
      background-color: rgba(255, 255, 255, 0.8);
      padding: 20px;
      border-radius: 15px;
      margin: 2rem auto;
      max-width: 600px;
      box-shadow: 0 8px 16px rgba(0,0,0,0.1);
      min-height: 100px;
    }
    #countdownTimer {
      font-size: 1.8em;
      font-weight: bold;
      color: #d63384;
    }
    #dailyPhrase {
      font-size: 1.3em;
      font-style: italic;
      color: #c2185b;
      margin-top: 0.5em;
    }
    .container-title {
        font-size: 1.8em;
        color: #e6005c;
        margin-bottom: 1em;
    }

    /* Estilos para o Mosaico de Imagens */
    .image-mosaic-container { margin: 2.5rem auto; padding: 15px; background-color: rgba(255, 255, 255, 0.75); border-radius: 15px; box-shadow: 0 10px 20px rgba(0,0,0,0.1); max-width: 900px; }
    .image-mosaic { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); grid-auto-rows: minmax(200px, auto); gap: 15px; }
    .image-mosaic .mosaic-item { width: 100%; aspect-ratio: 1 / 1; overflow: hidden; border-radius: 10px; box-shadow: 0 6px 12px rgba(0,0,0,0.15); }
    .image-mosaic .mosaic-item img { width: 100%; height: 100%; object-fit: cover; display: block; transition: transform 0.3s ease, filter 0.3s ease; }
    .image-mosaic .mosaic-item img:hover { transform: scale(1.08); filter: brightness(1.1); }
    .mosaic-item.featured { grid-column: span 2; grid-row: span 2; aspect-ratio: 1 / 1; }

    /* Estilos para Quadrinhos do Amor */
    .quadrinho-imagem img { max-width: 100%; border-radius: 10px; box-shadow: 0 4px 8px rgba(0,0,0,0.1); margin-top: 10px; margin-bottom: 15px; }
    .quadrinho-descricao { font-size: 0.95em; text-align: left; line-height: 1.5; }
    .quadrinho-descricao h4 { color: #c2185b; font-size: 1.2em; margin-top: 15px; margin-bottom: 8px; font-weight: bold; }
    .quadrinho-descricao p { margin-bottom: 12px; color: #5c3a0a; }
    .quadrinho-descricao p.official-desc { font-style: italic; color: #75542B; background-color: rgba(255, 240, 245, 0.5); padding: 10px; border-radius: 5px; }
    .quadrinho-descricao p.cute-message strong { color: #d63384; }

    /* Estilos para Anima√ß√£o do Envelope */
    .envelope-container { position: relative; width: 320px; height: 220px; margin: 20px auto; }
    .envelope { position: absolute; width: 100%; height: 100%; background-color: #ffc0cb; border-radius: 10px; box-shadow: 0 4px 15px rgba(0,0,0,0.2); display: flex; align-items: center; justify-content: center; }
    .envelope-flap { position: absolute; top: 0; left: 0; width: 100%; height: 55%; background-color: #ffb6c1; clip-path: polygon(0 0, 100% 0, 100% 30%, 50% 100%, 0 30%); transform-origin: top; transition: transform 0.7s ease-in-out; z-index: 3; }
    .envelope-container.open .envelope-flap { transform: rotateX(180deg); }
    .letter { position: absolute; width: 90%; height: 85%; background-color: #fffaf0; border: 1px solid #f0e68c; border-radius: 8px; padding: 15px; box-sizing: border-box; text-align: left; font-family: 'Courier New', Courier, monospace; font-size: 0.8rem; line-height: 1.4; color: #5c3a0a; overflow-y: auto; z-index: 1; transform: translateY(100%); opacity: 0; transition: transform 0.7s 0.5s ease-out, opacity 0.7s 0.5s ease-out; }
    .envelope-container.open .letter { transform: translateY(-5%); opacity: 1; z-index: 2; }
    .letter-content h4 { text-align: center; color: #d63384; margin-bottom: 10px; }
    .letter-content p { margin-bottom: 10px; }
    .letter-content .signature { text-align: right; margin-top: 15px; font-style: italic; }
    .letter-content .ps { margin-top: 15px; font-size: 0.9em; }

    /* Estilos para Quiz do Casal */
    .quiz-container { text-align: left; }
    .quiz-question { margin-bottom: 15px; font-weight: bold; }
    .quiz-options label { display: block; margin-bottom: 8px; cursor: pointer; }
    .quiz-options input { margin-right: 8px; }
    .quiz-button { background-color: #d63384; color: white; border: none; padding: 10px 20px; border-radius: 5px; cursor: pointer; font-size: 1em; margin-top: 15px; }
    .quiz-button:hover { background-color: #c2185b; }
    .quiz-score, .love-thermometer-display { margin-top: 20px; font-size: 1.2em; }
    .love-thermometer-bar-container { width: 100%; background-color: #fddde6; border-radius: 10px; height: 30px; margin-top: 10px; overflow: hidden; border: 1px solid #d63384; }
    .love-thermometer-bar { width: 0%; height: 100%; background-color: #e6005c; border-radius: 8px; transition: width 0.5s ease-in-out; text-align: center; line-height: 30px; color: white; }
    .player-turn { font-weight: bold; color: #e6005c; margin-bottom: 10px; }

    /* Estilos para Roleta do Amor */
    .roulette-container { display: flex; flex-direction: column; align-items: center; }
    .spin-button { margin-top: 20px; padding: 12px 25px; font-size: 1.2em; background-color: #d63384; color: white; border: none; border-radius: 8px; cursor: pointer; transition: background-color 0.3s; }
    .spin-button:hover { background-color: #c2185b; }
    #rouletteResult { margin-top: 15px; font-size: 1.3em; font-weight: bold; color: #e6005c; }

    /* --- NOVOS ESTILOS PARA OS JOGOS --- */
    .game-status { margin-top: 15px; font-size: 1.2em; font-weight: bold; }
    #tic-tac-toe-board { display: grid; grid-template-columns: repeat(3, 1fr); grid-template-rows: repeat(3, 1fr); width: 240px; height: 240px; margin: 20px auto; border: 2px solid #d63384; border-radius: 10px; }
    .ttt-cell { display: flex; justify-content: center; align-items: center; font-size: 3em; font-weight: bold; border: 1px solid #f48fb1; cursor: pointer; user-select: none; }
    .ttt-cell:hover { background-color: #ffe6eb; }
    .ttt-cell.heart { color: #e91e63; }
    .ttt-cell.x { color: #3f51b5; }
    #word-search-grid-container { display: grid; border: 2px solid #d63384; margin: 15px auto; padding: 5px; background-color: #fff0f5; max-width: 400px; }
    .ws-cell { width: 30px; height: 30px; display: flex; justify-content: center; align-items: center; border: 1px solid #f8bbd0; font-family: 'Courier New', Courier, monospace; font-size: 1.1em; font-weight: bold; text-transform: uppercase; cursor: pointer; user-select: none; }
    .ws-cell.selected { background-color: #ffc0cb; color: #c2185b; }
    .ws-cell.found { background-color: #a5d6a7; color: #2e7d32; animation: foundPulse 0.5s ease-out; }
    @keyframes foundPulse { 0% { transform: scale(1); } 50% { transform: scale(1.1); } 100% { transform: scale(1); } }
    #word-search-list-container { margin-top: 15px; text-align: left; }
    #word-search-list li { list-style: none; font-size: 1.1em; color: #5c3a0a; margin-bottom: 5px; }
    #word-search-list li.found-in-list { text-decoration: line-through; color: #9e9e9e; }
    #word-search-prize-container { margin-top: 20px; padding: 15px; background-color: #fff9c4; border: 2px dashed #ffb300; border-radius: 10px; }
    #prize-won { color: #e65100; }
  </style>
</head>
<body>
  <h1>Lays <span class="pulsing-heart">‚ù§Ô∏è</span> Mauro</h1>

  <div class="image-mosaic-container">
    <h3>Nossos Momentos ‚ù§Ô∏è</h3>
    <div class="image-mosaic">
      <div class="mosaic-item featured"><img src="img2.jpeg" alt="Lays e Mauro - Momento 2 (Destaque)"></div>
      <div class="mosaic-item"><img src="img1.jpeg" alt="Lays e Mauro - Momento 1"></div>
      <div class="mosaic-item"><img src="img3.jpeg" alt="Lays e Mauro - Ilustra√ß√£o Especial"></div>
      <div class="mosaic-item"><img src="img4.jpeg" alt="Lays e Mauro - Momento 4"></div>
      <div class="mosaic-item"><img src="img5.jpeg" alt="Lays e Mauro - Momento 5"></div>
    </div>
  </div>

  <div class="quadrinho-amor-container">
    <h3 class="container-title">Cena 1: Cuidado Delicado üí™ü©πüòÖ</h3>
    <div class="quadrinho-imagem"> <img src="cena1.png" alt="Mauro cuidando do dedo de Lays - Quadrinho do Amor"> </div>
    <div class="quadrinho-descricao"><h4>Descri√ß√£o da Ilustra√ß√£o:</h4><p class="official-desc">Mauro, um homem negro com bra√ßos visivelmente musculosos, cabelo preto cacheado mais curto e uma barba bem aparada, tenta com c√¥mica e amorosa dedica√ß√£o aplicar um curativo no dedo de Lays. Lays, uma mulher de pele clara com longos cabelos escuros e levemente ondulados, √© faixa azul de jiu-jitsu, e sua express√£o √© uma mistura de divers√£o e ternura enquanto recebe o cuidado gentil de Mauro...</p><h4>Nossos Pensamentos na Cena:</h4><p class="cute-message"><strong>Mauro (üí™ü©πüòÖ):</strong> "Calma, meu amor, o Dr. Mauro vai deixar esse dedo 100%... ou quase! Pelo menos o curativo vai ser com muito amor!"</p><p class="cute-message"><strong>Lays (üòäüíñü•ã):</strong> "Meu her√≥i atrapalhado e forte! T√£o fofo ele tentando ser delicado. Obrigada pelo cuidado, meu bem!"</p></div>
  </div>

  <div class="quadrinho-amor-container">
    <h3 class="container-title">Cena 2: Chef Apaixonado üë®‚Äçüç≥üî•üëñ</h3>
    <div class="quadrinho-imagem"> <img src="cena2.png" alt="Mauro cozinhando para Lays - Quadrinho do Amor"> </div>
    <div class="quadrinho-descricao"><h4>Descri√ß√£o da Ilustra√ß√£o:</h4><p class="official-desc">Em um charmoso estilo 'bonecos bent√¥', Mauro, um homem negro com um f√≠sico forte, cabelo preto cacheado curto e barba, est√° cozinhando alegremente em uma cozinha caseira acolhedora e convidativa. Ele veste roupas casuais, uma camiseta e shorts, com uma express√£o radiante de alegria. Ao lado dele, Lays, uma mulher com um tom de pele quente, levemente bronzeado/oliva e longos cabelos escuros levemente ondulados, observa-o com um sorriso amoroso, talvez encostada em um balc√£o, tamb√©m vestida casualmente com uma blusa confort√°vel e cal√ßas...</p><h4>Nossos Pensamentos na Cena:</h4><p class="cute-message"><strong>Mauro (üë®‚Äçüç≥üî•üëñ):</strong> "S√≥ no preparo daquele prato especial pra minha gata! Cozinhar pra ela √© meu jeito de dizer eu te amo... com tempero!"</p><p class="cute-message"><strong>Lays (ü•∞üçΩÔ∏èüõãÔ∏è):</strong> "Amo ver meu chef particular em a√ß√£o na nossa cozinha! O cheirinho j√° est√° incr√≠vel... e ele fica t√£o lindo concentrado. Mal posso esperar!"</p></div>
  </div>

  <h3>Uma m√∫sica especial para n√≥s:</h3>
  <div class="music-player-container"> <audio id="local-audio-player" controls src="true_love_soja.mp3">Seu navegador n√£o suporta o elemento de √°udio.</audio> </div>

  <div class="countdown-container">
    <p class="container-title" id="countdownTitle">Contagem regressiva para nossos 3 meses! ü•Ç‚ú®</p>
    <div id="countdownTimer">Carregando...</div>
  </div>

  <div class="daily-phrase-container">
    <p class="container-title">Pensamento do Dia ü•∞:</p>
    <div id="dailyPhrase">Carregando frase...</div>
  </div>

  <div class="interactive-section game-container" id="jogo-da-velha-secao">
    <h2 class="container-title">Jogo da Velha do Amor üíñ<span style="font-size: 0.7em; color: #6a1b9a;"> X </span>üíô</h2>
    <div id="tic-tac-toe-board">
      <div class="ttt-cell" data-index="0"></div> <div class="ttt-cell" data-index="1"></div> <div class="ttt-cell" data-index="2"></div>
      <div class="ttt-cell" data-index="3"></div> <div class="ttt-cell" data-index="4"></div> <div class="ttt-cell" data-index="5"></div>
      <div class="ttt-cell" data-index="6"></div> <div class="ttt-cell" data-index="7"></div> <div class="ttt-cell" data-index="8"></div>
    </div>
    <p id="tic-tac-toe-status" class="game-status">Vez do ‚ù§Ô∏è (Lays)</p>
    <button id="restart-tic-tac-toe" class="quiz-button">Jogar Novamente</button>
  </div>

  <div class="interactive-section game-container" id="caca-palavras-secao">
    <h2 class="container-title">Ca√ßa Palavras do Amor üíò</h2>
    <p>Lays, encontre as palavras de amor e ganhe um delicioso Vale Doces!</p>
    <div id="word-search-grid-container"></div>
    <div id="word-search-list-container"> <h3 style="color: #c2185b;">Palavras para Encontrar:</h3> <ul id="word-search-list"></ul> </div>
    <div id="word-search-feedback" style="margin-top:10px; font-weight:bold;"></div>
    <div id="word-search-found-container" style="margin-top:10px;"> <h3 style="color: #c2185b;">Palavras Encontradas: <span id="found-count">0</span> de <span id="total-words-display">0</span></h3> </div>
    <div id="word-search-prize-container" style="display:none;"> <h3 style="color: #d63384;">Parab√©ns Lays! üéâ Seu Vale Doces √©:</h3> <p id="prize-won" style="font-size: 1.8em; font-weight: bold; color: #e65100;"></p> </div>
    <button id="reset-word-search" class="quiz-button" style="margin-top:15px;">Novo Jogo / Misturar</button>
  </div>

  <h2>Nossa Jornada de Amor</h2>
  <p id="loveJourneyDescription">Gr√°fico do crescimento do nosso amor...</p>
  <canvas id="heartChart" width="400" height="400"></canvas>

  <div class="interactive-section">
    <h2>Quiz Surpresa do Casal! üíë</h2>
    <div class="quiz-container">
      <div id="playerIndicator" class="player-turn"></div> <div id="quizQuestion" class="quiz-question"></div> <div id="quizOptions" class="quiz-options"></div>
      <button id="nextQuizButton" class="quiz-button">Carregando Quiz...</button> <div id="quizScore" class="quiz-score"></div>
      <div class="love-thermometer-display"> üå°Ô∏è Term√¥metro do Amor (Sintonia): <div class="love-thermometer-bar-container"> <div id="loveThermometerBar" class="love-thermometer-bar">0%</div> </div> </div>
    </div>
  </div>

  <h2>Nosso Amor em Um S√≥ Cora√ß√£o ‚ù§Ô∏è</h2>
  <canvas id="perfectHeartShapeChart" width="400" height="400"></canvas>

  <div class="interactive-section">
    <h2>Roleta do Amor üé°üíï</h2>
    <div class="roulette-container">
        <canvas id="rouletteCanvas" width="450" height="450"></canvas>
        <button id="spinRouletteButton" class="spin-button">Girar a Roleta!</button>
        <div id="rouletteResult">Clique para sortear!</div>
    </div>
  </div>

<script>
document.addEventListener('DOMContentLoaded', function() {
    // --- DATA DE IN√çCIO DO RELACIONAMENTO E OUTRAS CONFIGS GLOBAIS ---
    const relationshipStartDate = new Date("March 5, 2025 00:00:00");

    // --- Cron√¥metro Regressivo ---
    try {
        const anniversaryDate = new Date("June 5, 2025 00:00:00").getTime();
        const countdownTitleEl = document.getElementById('countdownTitle');
        const countdownElement = document.getElementById("countdownTimer");

        if (countdownTitleEl && countdownElement) {
            const countdownInterval = setInterval(function() {
                const now = new Date().getTime();
                const distance = anniversaryDate - now;

                if (distance < 0) {
                    clearInterval(countdownInterval);
                    countdownElement.innerHTML = ""; // Limpa o timer
                    countdownTitleEl.innerHTML = "Chegou o nosso dia especial! ‚ù§Ô∏è"; // Atualiza t√≠tulo

                    // L√≥gica do envelope (continua a mesma)
                    const envelopeContainerDiv = document.createElement('div');
                    envelopeContainerDiv.className = 'envelope-container';
                    const envelopeDiv = document.createElement('div');
                    envelopeDiv.className = 'envelope';
                    const flapDiv = document.createElement('div');
                    flapDiv.className = 'envelope-flap';
                    const letterDiv = document.createElement('div');
                    letterDiv.className = 'letter';
                    letterDiv.innerHTML = `<div class="letter-content"><h4>üåΩüíõ Bilhetim Arretado d‚Äôam√¥ üíõüåΩ</h4><p>Pra minha cabocla mais linda, Lays</p><p>Hoje √© 5 de junho, meu amor, e a gente t√° comemorando 3 meses de namoro...<br>Mas tu sabe, n√©? Esse am√¥ come√ßou muito antes disso.<br>Antes de ser minha namorada, tu j√° era minha melhor amiga,<br>meu alicerce, meu riso f√°cil, meu abra√ßo certo. üåæ</p><p>Tu chegou feito bandeirinha de S√£o Jo√£o no c√©u da ro√ßa,<br>trazendo cor, calor de fogueira boa,<br>e o aconchego de rede em fim de tarde.<br>√î sorte grande que foi te encontrar! üî•</p><p>Tu √© arretada, Lays. Uma mulher daquelas que a gente admira em sil√™ncio,<br>e ama em voz alta.<br>Forte, inteligente, linda‚Ä¶<br>Teu jeito me encanta e tua presen√ßa me acalma.<br>O amor que sinto √© t√£o grande que nem zabumba e sanfona d√£o conta de tocar!</p><p>Hoje, tudo que eu queria era um forrozim colado contigo,<br>debaixo das estrelas, te sussurrando baixinho:<br>‚ÄúOxente, como √© b√£o te amar, viu?‚Äù üíÉüï∫</p><p class="signature">Obrigado por me fazer t√£o feliz.<br>Tu √© meu xod√≥, minha fogueirinha que nunca se apaga. ‚ù§Ô∏è‚Äçüî•</p><p class="signature">Com todo meu carinho e paix√£o,<br>do teu matuto apaixonado,<br>Mauro üíò</p><p class="ps">P.S.: Vamo simbora viver muitos S√£o Jo√£os juntos? üíçüëíüéâ</p></div>`;
                    envelopeDiv.appendChild(flapDiv);
                    envelopeDiv.appendChild(letterDiv);
                    envelopeContainerDiv.appendChild(envelopeDiv);
                    countdownElement.appendChild(envelopeContainerDiv);
                    setTimeout(() => { envelopeContainerDiv.classList.add('open'); }, 500);

                } else {
                    const days = Math.floor(distance / (1000 * 60 * 60 * 24));
                    const hours = Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
                    const minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
                    const seconds = Math.floor((distance % (1000 * 60)) / 1000);
                    countdownElement.innerHTML = `${days}d ${hours}h ${minutes}m ${seconds}s ‚è≥`;
                }
            }, 1000);
        } else {
            console.error("Elementos do cron√¥metro n√£o encontrados.");
        }
    } catch (e) { console.error("Erro no cron√¥metro:", e); }

    // --- Frases Rom√¢nticas Di√°rias ---
    try {
        const romanticPhrases = ["Cada dia ao seu lado √© um novo cap√≠tulo da nossa linda hist√≥ria de amor! Te amo! ‚ù§Ô∏è","Voc√™ √© a melodia que meu cora√ß√£o n√£o cansa de tocar e dan√ßar. üé∂üíë","Nosso amor floresce mais forte e belo a cada amanhecer juntos. üåπ‚òÄÔ∏è","Contando os segundos para sentir seu abra√ßo e me perder no seu olhar! ü§óüíñ","Com voc√™, a vida √© uma eterna primavera, cheia de cores e alegrias. Te amo, meu bem! üå∑üíû","Seu sorriso ilumina meus dias e aquece minha alma como o sol da manh√£. üòäüíò","Para sempre ainda parece pouco tempo para todo o amor que sinto por voc√™. Te amo infinitamente! üí´üíå","Que sorte a minha ter encontrado em voc√™ meu porto seguro e minha maior aventura! ‚õµüó∫Ô∏è","Nossos cora√ß√µes batem no mesmo ritmo, construindo a mais linda can√ß√£o de amor. üíûüéº","Voc√™ transforma o ordin√°rio em extraordin√°rio s√≥ por existir na minha vida. ‚ú® Te amo!"];
        const today = new Date();
        const dayOfYear = Math.floor((today - new Date(today.getFullYear(), 0, 0)) / (1000 * 60 * 60 * 24));
        const phraseIndex = dayOfYear % romanticPhrases.length;
        const dailyPhraseElement = document.getElementById("dailyPhrase");
        if (dailyPhraseElement) {
            dailyPhraseElement.innerHTML = `"${romanticPhrases[phraseIndex]}"`;
        } else {
            console.error("Elemento da frase di√°ria n√£o encontrado.");
        }
    } catch (e) { console.error("Erro na frase di√°ria:", e); }

    // --- L√ìGICA PARA O JOGO DA VELHA DO AMOR ---
    try {
        const ttt_boardElement = document.getElementById('tic-tac-toe-board');
        const ttt_statusElement = document.getElementById('tic-tac-toe-status');
        const ttt_restartButton = document.getElementById('restart-tic-tac-toe');
        const ttt_cells = Array.from(document.querySelectorAll('.ttt-cell'));

        if (ttt_boardElement && ttt_statusElement && ttt_restartButton && ttt_cells.length === 9) {
            let ttt_currentPlayerSymbol = '‚ù§Ô∏è';
            let ttt_boardState = Array(9).fill(null);
            let ttt_gameActive = true;
            const ttt_winningConditions = [[0,1,2],[3,4,5],[6,7,8],[0,3,6],[1,4,7],[2,5,8],[0,4,8],[2,4,6]];

            function ttt_handleCellClick(event) {
                const clickedCell = event.target;
                const clickedCellIndex = parseInt(clickedCell.getAttribute('data-index'));
                if (ttt_boardState[clickedCellIndex] !== null || !ttt_gameActive) return;
                ttt_boardState[clickedCellIndex] = ttt_currentPlayerSymbol;
                clickedCell.textContent = ttt_currentPlayerSymbol;
                clickedCell.classList.add(ttt_currentPlayerSymbol === '‚ù§Ô∏è' ? 'heart' : 'x');
                if (ttt_checkWin()) {
                    ttt_statusElement.textContent = `üéâ Jogador ${ttt_currentPlayerSymbol} Venceu! üéâ`;
                    ttt_gameActive = false; return;
                }
                if (ttt_boardState.every(cell => cell !== null)) {
                    ttt_statusElement.textContent = "Ops! Deu Velha! Empate! üíî";
                    ttt_gameActive = false; return;
                }
                ttt_currentPlayerSymbol = ttt_currentPlayerSymbol === '‚ù§Ô∏è' ? 'X' : '‚ù§Ô∏è';
                let nextPlayerName = ttt_currentPlayerSymbol === '‚ù§Ô∏è' ? "Lays (‚ù§Ô∏è)" : "Mauro (X)";
                ttt_statusElement.textContent = `Vez do jogador ${nextPlayerName}`;
            }
            function ttt_checkWin() {
                for (const condition of ttt_winningConditions) {
                    const [a, b, c] = condition.map(index => ttt_boardState[index]);
                    if (a && a === b && b === c) return true;
                }
                return false;
            }
            function ttt_restartGame() {
                ttt_currentPlayerSymbol = '‚ù§Ô∏è'; ttt_boardState.fill(null); ttt_gameActive = true;
                ttt_statusElement.textContent = `Vez do ‚ù§Ô∏è (Lays)`;
                ttt_cells.forEach(cell => { cell.textContent = ''; cell.classList.remove('heart', 'x'); });
            }
            ttt_cells.forEach(cell => cell.addEventListener('click', ttt_handleCellClick));
            ttt_restartButton.addEventListener('click', ttt_restartGame);
        } else { console.error("Elementos do Jogo da Velha n√£o encontrados ou incompletos."); }
    } catch (e) { console.error("Erro no Jogo da Velha:", e); }

    // --- L√ìGICA PARA O CA√áA PALAVRAS DO AMOR ---
    try {
        const ws_gridContainer = document.getElementById('word-search-grid-container');
        const ws_wordListElement = document.getElementById('word-search-list');
        const ws_foundCountElement = document.getElementById('found-count');
        const ws_totalWordsElement = document.getElementById('total-words-display');
        const ws_prizeContainerElement = document.getElementById('word-search-prize-container');
        const ws_prizeWonElement = document.getElementById('prize-won');
        const ws_resetButton = document.getElementById('reset-word-search');
        const ws_feedbackElement = document.getElementById('word-search-feedback');

        if (ws_gridContainer && ws_wordListElement && ws_foundCountElement && ws_totalWordsElement && ws_prizeContainerElement && ws_prizeWonElement && ws_resetButton && ws_feedbackElement) {
            const ws_wordsToFind = [ { text: "AMOR", found: false }, { text: "PAIXAO", found: false }, { text: "CARINHO", found: false }, { text: "BEIJO", found: false }, { text: "ETERNO", found: false } ];
            const ws_prizes = ["Baton Garoto üç´", "Diamante Negro üíé", "Ouro Branco ‚ú®", "Prest√≠gio ü••", "M&M's ¬ÆÔ∏èüåà"];
            const ws_gridSize = 12; let ws_grid = []; let ws_isSelecting = false; let ws_selectionPath = []; let ws_foundWordsCount = 0;

            function ws_generateRandomLetter() { const alphabet = "ABCDEFGHIJKLMNOPQRSTUVWXYZ"; return alphabet[Math.floor(Math.random() * alphabet.length)]; }
            function ws_canPlaceWord(word, r, c, dr, dc) { for (let i = 0; i < word.length; i++) { const nr = r + i * dr; const nc = c + i * dc; if (nr < 0 || nr >= ws_gridSize || nc < 0 || nc >= ws_gridSize || (ws_grid[nr][nc] !== null && ws_grid[nr][nc] !== word[i])) return false; } return true; }
            function ws_placeWordInGrid(wordObj) { const word = wordObj.text; const directions = [ { dr: 0, dc: 1 }, { dr: 1, dc: 0 }, { dr: 1, dc: 1 }, { dr: 0, dc: -1 }, { dr: -1, dc: 0 }, { dr: -1, dc: -1 }, { dr: 1, dc: -1 }, { dr: -1, dc: 1 }]; let placed = false; let attempts = 0; while (!placed && attempts < 100) { const dir = directions[Math.floor(Math.random() * directions.length)]; const r = Math.floor(Math.random() * ws_gridSize); const c = Math.floor(Math.random() * ws_gridSize); if (ws_canPlaceWord(word, r, c, dir.dr, dir.dc)) { for (let i = 0; i < word.length; i++) { ws_grid[r + i * dir.dr][c + i * dir.dc] = word[i]; } placed = true; } attempts++; } return placed; }
            function ws_initializeGrid() { ws_grid = Array(ws_gridSize).fill(null).map(() => Array(ws_gridSize).fill(null)); ws_wordsToFind.forEach(w => w.found = false); ws_foundWordsCount = 0; [...ws_wordsToFind].sort(() => 0.5 - Math.random()).forEach(ws_placeWordInGrid); for (let r = 0; r < ws_gridSize; r++) for (let c = 0; c < ws_gridSize; c++) if (ws_grid[r][c] === null) ws_grid[r][c] = ws_generateRandomLetter(); }
            function ws_renderGrid() { ws_gridContainer.innerHTML = ''; ws_gridContainer.style.gridTemplateColumns = `repeat(${ws_gridSize}, 1fr)`; for (let r = 0; r < ws_gridSize; r++) for (let c = 0; c < ws_gridSize; c++) { const cell = document.createElement('div'); cell.classList.add('ws-cell'); cell.textContent = ws_grid[r][c]; cell.dataset.row = r; cell.dataset.col = c; cell.addEventListener('mousedown', (e) => ws_handleCellMouseDown(e, cell, r, c)); cell.addEventListener('mouseenter', (e) => ws_handleCellMouseEnter(e, cell, r, c)); ws_gridContainer.appendChild(cell); } document.addEventListener('mouseup', ws_handleCellMouseUp, true); } // Use capture for mouseup
            function ws_renderWordList() { ws_wordListElement.innerHTML = ''; ws_wordsToFind.forEach(w => { const li = document.createElement('li'); li.textContent = w.text; if (w.found) li.classList.add('found-in-list'); ws_wordListElement.appendChild(li); }); ws_totalWordsElement.textContent = ws_wordsToFind.length; ws_updateFoundCount(); }
            function ws_updateFoundCount() { ws_foundCountElement.textContent = ws_foundWordsCount; if (ws_foundWordsCount > 0 && ws_foundWordsCount <= ws_prizes.length) { ws_prizeWonElement.textContent = ws_prizes[ws_foundWordsCount - 1]; ws_prizeContainerElement.style.display = 'block'; } else if (ws_foundWordsCount === 0) { ws_prizeWonElement.textContent = "Continue procurando os doces sentimentos! ü•∞"; ws_prizeContainerElement.style.display = 'block'; } if (ws_foundWordsCount === ws_wordsToFind.length) { ws_feedbackElement.textContent = "Parab√©ns! Voc√™ encontrou todas as palavras de amor!"; ws_prizeWonElement.textContent += " - Pr√™mio M√°ximo! üèÜ"; }}
            function ws_handleCellMouseDown(event, cellElement, row, col) { event.preventDefault(); ws_isSelecting = true; ws_selectionPath = [{ element: cellElement, row: row, col: col, letter: ws_grid[row][col] }]; cellElement.classList.add('selected'); ws_feedbackElement.textContent = ""; }
            function ws_handleCellMouseEnter(event, cellElement, row, col) { if (!ws_isSelecting || ws_selectionPath.some(p => p.element === cellElement)) return; const lastPathCell = ws_selectionPath[ws_selectionPath.length - 1]; if (ws_selectionPath.length === 1) { const dr = Math.abs(row - lastPathCell.row); const dc = Math.abs(col - lastPathCell.col); if (!((dr <= 1 && dc <= 1) && (dr !== 0 || dc !== 0))) return; } else if (ws_selectionPath.length > 1) { const firstPathCell = ws_selectionPath[0]; const secondPathCell = ws_selectionPath[1]; const established_dr = secondPathCell.row - firstPathCell.row; const established_dc = secondPathCell.col - firstPathCell.col; const current_dr = row - lastPathCell.row; const current_dc = col - lastPathCell.col; if (current_dr !== established_dr || current_dc !== established_dc) return; } ws_selectionPath.push({ element: cellElement, row: row, col: col, letter: ws_grid[row][col] }); cellElement.classList.add('selected'); }
            function ws_handleCellMouseUp() { if (!ws_isSelecting || ws_selectionPath.length === 0) { ws_isSelecting = false; return; } ws_isSelecting = false; let selectedWordForward = ws_selectionPath.map(p => p.letter).join(''); let selectedWordBackward = [...ws_selectionPath].reverse().map(p => p.letter).join(''); let wordFoundThisTurn = false; for (const wordObj of ws_wordsToFind) { if (!wordObj.found && (wordObj.text === selectedWordForward || wordObj.text === selectedWordBackward)) { wordObj.found = true; wordFoundThisTurn = true; ws_foundWordsCount++; ws_selectionPath.forEach(p => p.element.classList.add('found')); break; } } if (wordFoundThisTurn) ws_feedbackElement.textContent = "Palavra encontrada! üòç"; else ws_feedbackElement.textContent = "N√£o √© uma palavra da lista. Tente de novo! ü§î"; ws_selectionPath.forEach(p => p.element.classList.remove('selected')); ws_selectionPath = []; ws_renderWordList(); }
            function ws_resetWordSearchGame() { ws_initializeGrid(); ws_renderGrid(); ws_renderWordList(); ws_prizeContainerElement.style.display = 'none'; ws_prizeWonElement.textContent = ''; ws_feedbackElement.textContent = ""; }
            ws_resetButton.addEventListener('click', ws_resetWordSearchGame); ws_resetWordSearchGame();
        } else { console.error("Elementos do Ca√ßa Palavras n√£o encontrados."); }
    } catch (e) { console.error("Erro no Ca√ßa Palavras:", e); }

    // --- Gr√°ficos (Love Journey & Perfect Heart) ---
    try {
        const currentDate = new Date();
        const timeDiff = currentDate.getTime() - relationshipStartDate.getTime();
        let daysPassedSinceStart = Math.max(1, Math.ceil(timeDiff / (1000 * 60 * 60 * 24)));
        const loveJourneyDesc = document.getElementById('loveJourneyDescription');
        if (loveJourneyDesc) {
            loveJourneyDesc.textContent = `Gr√°fico do crescimento do nosso amor ao longo de ${daysPassedSinceStart} dia(s) incr√≠veis!`;
        }
        function generateLogGrowthData(totalDays) { const labels = []; const dataLays = []; const dataMauro = []; const A_Lays = 20, B_Lays = 0.15, C_Lays = 15; const A_Mauro = 22, B_Mauro = 0.12, C_Mauro = 12; for (let day = 1; day <= totalDays; day++) { labels.push("Dia " + day); dataLays.push(A_Lays * Math.log(B_Lays * day + 1) + C_Lays + Math.random() * 2.5); dataMauro.push(A_Mauro * Math.log(B_Mauro * day + 1) + C_Mauro + Math.random() * 2.5); } return { labels, dataLays, dataMauro }; }
        const { labels, dataLays, dataMauro } = generateLogGrowthData(daysPassedSinceStart);
        const heartChartCanvas = document.getElementById('heartChart');
        if (heartChartCanvas) new Chart(heartChartCanvas.getContext('2d'), { type: 'line', data: { labels, datasets: [ { label: 'Lays üíñ', data: dataLays, borderColor: '#ff69b4', backgroundColor: 'rgba(255,105,180,0.2)', fill: true, tension: 0.4 }, { label: 'Mauro üíò', data: dataMauro, borderColor: '#db2777', backgroundColor: 'rgba(219,39,119,0.2)', fill: true, tension: 0.4 } ]}, options: { responsive: true, plugins: { title: { display: true, text: 'O Crescimento Infinito do Nosso Amor ‚ù§Ô∏è', font: { size: 22 }, color: '#d63384' }, legend: { labels: { font: { size: 14 }}}}, scales: { y: { beginAtZero: false, title: { display: true, text: 'Intensidade do Amor (Crescimento Infinito)' }}, x: { title: { display: true, text: 'Dias de Amor Eterno' }}} , animation: { duration: 1500, easing: 'easeInOutQuint' } } });
        function generatePerfectHeartPlotData(steps) { const dataPoints = []; for (let i = 0; i <= steps; i++) { const t = (Math.PI * 2 * i) / steps; const x = 16 * Math.pow(Math.sin(t), 3); const y = 13 * Math.cos(t) - 5 * Math.cos(2*t) - 2 * Math.cos(3*t) - Math.cos(4*t); dataPoints.push({ x: x, y: y }); } return dataPoints; }
        const perfectHeartPoints = generatePerfectHeartPlotData(100);
        const perfectHeartCanvas = document.getElementById('perfectHeartShapeChart');
        if (perfectHeartCanvas) new Chart(perfectHeartCanvas.getContext('2d'), { type: 'line', data: { datasets: [{ label: 'Cora√ß√£o Perfeito', data: perfectHeartPoints, borderColor: '#d63384', backgroundColor: 'rgba(214, 51, 132, 0.3)', fill: true, tension: 0, pointRadius: 0, borderWidth: 3 }] }, options: { responsive: true, maintainAspectRatio: true, plugins: { title: { display: true, text: 'S√≠mbolo do Nosso Amor Eterno üíò', font: { size: 22, family: 'Segoe UI'}, color: '#d63384'}, legend: {display: false}}, scales: { x: {type: 'linear', display: false}, y: {type: 'linear', display: false}} , animation: { duration: 2500, easing: 'easeOutCubic'} } });
    } catch (e) { console.error("Erro nos gr√°ficos:", e); }

    // --- L√ìGICA PARA O QUIZ DO CASAL ---
    try {
        const quizData = [ { question: "Onde foi nosso primeiro beijo?", options: ["Na pracinha da cidade", "No cinema local", "No laguinho da UFPE", "Na festa de Ana Maria"], correctAnswer: 2 }, { question: "Qual a data do nosso anivers√°rio de namoro?", options: ["05 de Mar√ßo", "15 de Abril", "05 de Junho", "20 de Fevereiro"], correctAnswer: 0 }, { question: "Onde nos conhecemos?", options: ["Na faculdade (UFPE)", "No trabalho", "Online, num app", "Numa festa de amigos"], correctAnswer: 0 }, { question: "Onde foi realizado o pedido de namoro?", options: ["Em um jantar rom√¢ntico especial", "Na praia ao p√¥r do sol", "Na cozinha da casa de Lays", "Durante um piquenique no parque"], correctAnswer: 2 }, { question: "Qual local mais frequentamos juntos?", options: ["Parque da cidade aos domingos", "Sorveteria Del√≠cia Tropical", "Cinema do Shopping X", "Emflor Cafeteria"], correctAnswer: 3 }, { question: "Qual foi nosso primeiro date (encontro)?", options: ["Jantar e cinema", "Jantar seguido de passeio de Catamar√£", "Piquenique no parque e sorvete", "Show de rock alternativo e barzinho"], correctAnswer: 1 }, { question: "Qual primeira refei√ß√£o que fizemos ap√≥s o pedido de namoro?", options: ["Pizza e refrigerante", "Sushi e saqu√™", "Batata doce e bife", "Lasanha caseira e vinho"], correctAnswer: 2 }, { question: "Qual primeiro presente Lays recebeu do namorado?", options: ["Um buqu√™ de rosas vermelhas", "Uma caixa de chocolates finos importados", "Uma cesta em comemora√ß√£o ao Dia das Mulheres", "Um livro de romance famoso"], correctAnswer: 2 }, { question: "Quantas vezes Lays recebeu flores do namorado?", options: ["Apenas uma vez, no in√≠cio", "Duas vezes, em datas especiais", "Tr√™s vezes contadas", "Mais de 3 vezes, ele √© um rom√¢ntico!"], correctAnswer: 3 }, { question: "O que Lays recebeu de presente de P√°scoa?", options: [ "Um ovo de P√°scoa gigante da marca favorita dela", "Uma cesta com chocolates, 3 mini ovos de colher, uma bag e um bon√©", "Apenas uma caixa com chocolates variados e uma cartinha", "Um coelhinho de pel√∫cia fofo e alguns bombons" ], correctAnswer: 1 } ];
        let currentQuestionIndex = 0; let scores = { Lays: 0, Mauro: 0 }; let currentPlayer = "Lays"; let quizFinished = false;
        const questionElement = document.getElementById('quizQuestion'); const optionsElement = document.getElementById('quizOptions'); const nextButton = document.getElementById('nextQuizButton'); const scoreElement = document.getElementById('quizScore'); const thermometerBar = document.getElementById('loveThermometerBar'); const playerIndicator = document.getElementById('playerIndicator');

        if (questionElement && optionsElement && nextButton && scoreElement && thermometerBar && playerIndicator) {
            function loadQuizQuestion() { if (quizFinished) return; let actualQuestionIndexForPlayer = (currentPlayer === "Lays") ? currentQuestionIndex : currentQuestionIndex - quizData.length; playerIndicator.textContent = `Vez de: ${currentPlayer} responder!`; const questionToShowIndex = actualQuestionIndexForPlayer; if (questionToShowIndex >= quizData.length) { showQuizResults(); return; } const currentQ = quizData[questionToShowIndex]; questionElement.textContent = `Pergunta ${questionToShowIndex + 1}: ${currentQ.question}`; optionsElement.innerHTML = ""; currentQ.options.forEach((option, index) => { const li = document.createElement('label'); li.innerHTML = `<input type="radio" name="quizOption" value="${index}"> ${option}`; optionsElement.appendChild(li); }); nextButton.textContent = "Confirmar Resposta"; nextButton.disabled = false; }
            function handleQuizSubmission() { if (quizFinished) { currentQuestionIndex = 0; scores = { Lays: 0, Mauro: 0 }; currentPlayer = "Lays"; quizFinished = false; scoreElement.textContent = ""; updateLoveThermometer(); loadQuizQuestion(); return; } const selectedOption = document.querySelector('input[name="quizOption"]:checked'); if (!selectedOption) { alert("Por favor, selecione uma op√ß√£o!"); return; } const questionIndexOfPlayer = (currentPlayer === "Lays") ? currentQuestionIndex : currentQuestionIndex - quizData.length; if (parseInt(selectedOption.value) === quizData[questionIndexOfPlayer].correctAnswer) { scores[currentPlayer]++; } currentQuestionIndex++; if (currentPlayer === "Lays" && (currentQuestionIndex >= quizData.length)) { currentPlayer = "Mauro"; alert("Lays completou! Agora √© a vez de Mauro."); loadQuizQuestion(); } else if (currentPlayer === "Mauro" && (currentQuestionIndex - quizData.length >= quizData.length)) { showQuizResults(); } else { loadQuizQuestion(); } updateLoveThermometer(); }
            function showQuizResults() { quizFinished = true; questionElement.textContent = "Quiz Finalizado!"; optionsElement.innerHTML = ""; playerIndicator.textContent = "Resultado Final:"; scoreElement.innerHTML = `Pontua√ß√£o:<br>Lays: ${scores.Lays} de ${quizData.length} <br>Mauro: ${scores.Mauro} de ${quizData.length}`; nextButton.textContent = "Jogar Novamente"; nextButton.disabled = false; updateLoveThermometer(); }
            function updateLoveThermometer() { const totalPossibleScore = quizData.length * 2; const combinedScore = scores.Lays + scores.Mauro; const percentage = totalPossibleScore > 0 ? (combinedScore / totalPossibleScore) * 100 : 0; thermometerBar.style.width = `${percentage}%`; thermometerBar.textContent = `${Math.round(percentage)}% Sintonia`; }
            nextButton.addEventListener('click', handleQuizSubmission); loadQuizQuestion();
        } else { console.error("Elementos do Quiz n√£o encontrados."); }
    } catch (e) { console.error("Erro no Quiz:", e); }

    // --- L√ìGICA PARA ROLETA DO AMOR ---
    try {
        const rouletteCanvasEl = document.getElementById('rouletteCanvas');
        const spinButtonEl = document.getElementById('spinRouletteButton');
        const rouletteResultElementEl = document.getElementById('rouletteResult');

        if (rouletteCanvasEl && spinButtonEl && rouletteResultElementEl) {
            const rouletteCtxEl = rouletteCanvasEl.getContext('2d');
            const roulettePrizes = [ "Vale um abra√ßo apertado ü§ó", "Vale um beijo demorado üòò", "Massagem relaxante üíÜ‚Äç‚ôÄÔ∏èüíÜ‚Äç‚ôÇÔ∏è", "Escolher o filme de hoje üé¨", "Jantar especial feito por mim üç≥", "Um elogio sincero ‚ú®", "Caf√© na cama surpresa ‚òïü•ê", "Noite de jogos divertidos üé≤", "Passeio rom√¢ntico üå≥", "Ouvir sua m√∫sica favorita juntos üé∂", "Um desejo realizado (simples!) üåü", "Escrever um bilhetinho de amor üíå" ];
            const numSegmentsRoulette = roulettePrizes.length;
            const anglePerSegmentRoulette = (2 * Math.PI) / numSegmentsRoulette;
            // Cores para os segmentos (mantido)
            const colorsRoulette = ["#FFC0CB", "#FFB6C1", "#FF69B4", "#DB7093", "#C71585", "#E6E6FA", "#D8BFD8", "#DDA0DD", "#DA70D6", "#BA55D3", "#FFC0CB", "#FFB6C1"];
            let currentAngleRoulette = 0; // √Çngulo de rota√ß√£o atual da roleta
            let spinTimeoutRoulette = null;
            let isSpinningRoulette = false;

            function drawRouletteSegment(index, text, startAngle, endAngle) {
                rouletteCtxEl.beginPath();
                rouletteCtxEl.fillStyle = colorsRoulette[index % colorsRoulette.length];
                rouletteCtxEl.moveTo(rouletteCanvasEl.width / 2, rouletteCanvasEl.height / 2);
                rouletteCtxEl.arc(rouletteCanvasEl.width / 2, rouletteCanvasEl.height / 2, rouletteCanvasEl.width / 2 - 10, startAngle, endAngle);
                rouletteCtxEl.closePath();
                rouletteCtxEl.fill();
                rouletteCtxEl.stroke(); // Adiciona uma borda ao segmento

                // Desenhar texto
                rouletteCtxEl.save();
                rouletteCtxEl.fillStyle = "#4B0082"; // Cor do texto (roxo escuro)
                rouletteCtxEl.font = "bold 13px Segoe UI"; // Ajustado na etapa anterior
                rouletteCtxEl.translate(rouletteCanvasEl.width / 2, rouletteCanvasEl.height / 2);
                rouletteCtxEl.rotate(startAngle + anglePerSegmentRoulette / 2); // Rotaciona para o meio do segmento
                rouletteCtxEl.textAlign = "right";
                rouletteCtxEl.fillText(text, rouletteCanvasEl.width / 2 - 25, 7); // Ajustado na etapa anterior
                rouletteCtxEl.restore();
            }

            function drawRoulette() {
                rouletteCtxEl.clearRect(0, 0, rouletteCanvasEl.width, rouletteCanvasEl.height);
                rouletteCtxEl.strokeStyle = '#d63384'; // Borda dos segmentos
                rouletteCtxEl.lineWidth = 2;

                for (let i = 0; i < numSegmentsRoulette; i++) {
                    // O √¢ngulo de in√≠cio de cada segmento √© currentAngleRoulette + seu offset
                    drawRouletteSegment(i, roulettePrizes[i], currentAngleRoulette + i * anglePerSegmentRoulette, currentAngleRoulette + (i + 1) * anglePerSegmentRoulette);
                }

                // Desenhar o ponteiro (seta no topo)
                rouletteCtxEl.fillStyle = '#e6005c'; // Cor do ponteiro
                rouletteCtxEl.beginPath();
                rouletteCtxEl.moveTo(rouletteCanvasEl.width / 2 - 10, 7); // Ajustado na etapa anterior
                rouletteCtxEl.lineTo(rouletteCanvasEl.width / 2 + 10, 7);
                rouletteCtxEl.lineTo(rouletteCanvasEl.width / 2, 38);    // Ajustado na etapa anterior
                rouletteCtxEl.closePath();
                rouletteCtxEl.fill();
            }

            function spinRoulette() {
                if (isSpinningRoulette) return;
                isSpinningRoulette = true;
                spinButtonEl.disabled = true;
                rouletteResultElementEl.textContent = "Girando...";

                // Define um √¢ngulo de parada aleat√≥rio (m√∫ltiplas rota√ß√µes + um √¢ngulo final)
                // O + Math.PI / 2 √© para tentar compensar e fazer o primeiro item ter mais chance de parar no topo inicialmente.
                // No entanto, o c√°lculo do √≠ndice vencedor deve ser independente disso.
                const targetRotation = (Math.random() * 10 + 15) * Math.PI * 2; // V√°rias rota√ß√µes completas + um pouco mais
                const spinDuration = Math.random() * 3000 + 5000; // Tempo total de giro (5-8 segundos)
                let startTimestamp = null;
                const initialAngle = currentAngleRoulette; // Guarda o √¢ngulo inicial da roleta antes de girar

                function rotate(timestamp) {
                    if (!startTimestamp) startTimestamp = timestamp;
                    const progress = timestamp - startTimestamp;
                    
                    if (progress < spinDuration) {
                        // Anima√ß√£o de "ease-out": desacelera no final
                        const easedProgress = 1 - Math.pow(1 - (progress / spinDuration), 4); // Expoente 4 para um ease-out mais pronunciado
                        currentAngleRoulette = initialAngle + (targetRotation * easedProgress);
                        drawRoulette();
                        spinTimeoutRoulette = requestAnimationFrame(rotate);
                    } else {
                        // Finaliza o giro exatamente no targetRotation para consist√™ncia, se necess√°rio,
                        // mas a l√≥gica de easedProgress deve levar perto o suficiente.
                        currentAngleRoulette = initialAngle + targetRotation;
                        drawRoulette(); // √öltimo desenho no √¢ngulo final

                        // --- C√ÅLCULO CORRIGIDO DO SEGMENTO VENCEDOR ---
                        // O ponteiro est√° em 1.5 * PI (270 graus) no sentido hor√°rio a partir da horizontal direita (0 rad).
                        // currentAngleRoulette √© o √¢ngulo de in√≠cio do segmento 0 em rela√ß√£o √† horizontal direita.
                        // Queremos saber qual segmento est√° sob o ponteiro.

                        // Normaliza o √¢ngulo final da roleta (onde o segmento 0 aponta)
                        const finalAngleOfSeg0 = currentAngleRoulette % (2 * Math.PI);

                        // O √¢ngulo do ponteiro (fixo no topo) em rela√ß√£o ao sistema de coordenadas do canvas (0 rad √† direita, cresce hor√°rio)
                        const pointerAngle = 1.5 * Math.PI; // 270 graus

                        // Calcula o √¢ngulo do ponteiro em rela√ß√£o ao in√≠cio do segmento 0
                        // Queremos um √¢ngulo positivo que represente o deslocamento do ponteiro a partir do in√≠cio do segmento 0,
                        // movendo-se no sentido de desenho dos segmentos (hor√°rio).
                        let offsetFromSeg0ToPointer = (pointerAngle - finalAngleOfSeg0);
                        
                        // Normaliza o offset para estar entre 0 e 2*PI
                        offsetFromSeg0ToPointer = (offsetFromSeg0ToPointer % (2 * Math.PI) + (2 * Math.PI)) % (2 * Math.PI);

                        // Determina qual segmento est√° sob o ponteiro
                        const winningSegmentIndex = Math.floor(offsetFromSeg0ToPointer / anglePerSegmentRoulette);
                        // --- FIM DO C√ÅLCULO CORRIGIDO ---

                        if (roulettePrizes[winningSegmentIndex]) {
                            rouletteResultElementEl.textContent = `üéâ ${roulettePrizes[winningSegmentIndex]} üéâ`;
                        } else {
                            rouletteResultElementEl.textContent = "Tente de novo! ü§î"; // Caso algo d√™ errado
                            console.error("√çndice do segmento vencedor inv√°lido:", winningSegmentIndex, "√Çngulo final:", finalAngleOfSeg0, "Offset:", offsetFromSeg0ToPointer);
                        }
                        
                        isSpinningRoulette = false;
                        spinButtonEl.disabled = false;
                    }
                }
                spinTimeoutRoulette = requestAnimationFrame(rotate);
            }

            spinButtonEl.addEventListener('click', spinRoulette);
            drawRoulette(); // Desenha a roleta inicialmente
        } else {
            console.error("Elementos da Roleta n√£o encontrados no DOM.");
        }
    } catch (e) {
        console.error("Erro na Roleta:", e);
    }

});
</script>
</body>
</html>